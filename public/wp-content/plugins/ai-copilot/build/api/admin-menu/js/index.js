(()=>{"use strict";var e={d:(t,s)=>{for(var i in s)e.o(s,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:s[i]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{INITIAL:()=>a,INITIAL_STATE:()=>r,QUADLAYERS_AICP_STORE_NAME:()=>q,STORE_NAME:()=>n,actions:()=>i,fetchRestApiSettings:()=>T,reducer:()=>S,resolvers:()=>d,selectors:()=>s,useAdminMenuModulesSettings:()=>y,useAdminMenuServicesSettings:()=>A,useAdminMenuStatsSettings:()=>h,useModuleAllowedPostTypes:()=>R});var s={};e.r(s),e.d(s,{getModifiedSettingsModules:()=>c,getModifiedSettingsServices:()=>u,getModifiedSettingsStats:()=>M,getSavedSettingsModules:()=>g,getSavedSettingsServices:()=>v,getSavedSettingsStats:()=>l});var i={};e.r(i),e.d(i,{deleteModifiedSettingsStats:()=>V,deleteSettings:()=>C,saveModifiedSettingsModules:()=>U,saveModifiedSettingsServices:()=>F,saveModifiedSettingsStats:()=>b,saveSettings:()=>L,setSavedSettingsModules:()=>O,setSavedSettingsServices:()=>N,setSavedSettingsStats:()=>P,updateModifiedSettingsModules:()=>D,updateModifiedSettingsServices:()=>w,updateModifiedSettingsStats:()=>I});var d={};e.r(d),e.d(d,{getSavedSettingsModules:()=>j,getSavedSettingsServices:()=>k,getSavedSettingsStats:()=>G});var S={};e.r(S),e.d(S,{default:()=>$});const o=window.wp.data,n="aicp/menu/store",a={modules:{},services:{},stats:{}},r={savedSettings:a,modifiedSettings:a},g=e=>e.savedSettings.modules,c=e=>e.modifiedSettings.modules,v=e=>e.savedSettings.services,u=e=>e.modifiedSettings.services,l=e=>e.savedSettings.stats,M=e=>e.modifiedSettings.stats,f=window.wp.i18n,p=window.wp.notices,m=window.aicp.helpers,E=window.wp.element,{QUADLAYERS_AICP_API_ADMIN_MENU_REST_ROUTES:_}=aicpApiAdminMenu,T=({method:e,data:t,route:s}={})=>(0,m.apiFetch)({path:_[s],method:e,data:t});function y(){const{updateModifiedSettingsModules:e,saveModifiedSettingsModules:t}=(0,o.useDispatch)(n),{savedSettingsModules:s,modifiedSettingsModules:i,isResolvingSettingsModules:d,hasResolvedSettingsModules:S}=(0,o.useSelect)((s=>{const{getSavedSettingsModules:i,getModifiedSettingsModules:d,isResolving:S,hasFinishedResolution:o}=s(n);return{updateModifiedSettingsModules:e,saveModifiedSettingsModules:t,savedSettingsModules:i(),modifiedSettingsModules:d(),isResolvingSettingsModules:S("getSavedSettingsModules"),hasResolvedSettingsModules:o("getSavedSettingsModules")}}),[]);return{savedSettingsModules:s,modifiedSettingsModules:i,saveModifiedSettingsModules:t,updateModifiedSettingsModules:e,isResolvingSettingsModules:d,hasResolvedSettingsModules:S}}function h(){const{savedSettingsStats:e,modifiedSettingsStats:t,isResolvingSettingsStats:s,hasResolvedSettingsStats:i}=(0,o.useSelect)((e=>{const{getSavedSettingsStats:t,getModifiedSettingsStats:s,isResolving:i,hasFinishedResolution:d}=e(n);return{savedSettingsStats:t(),modifiedSettingsStats:s(),isResolvingSettingsStats:i("getSavedSettingsStats"),hasResolvedSettingsStats:d("getSavedSettingsStats")}}),[]),{updateModifiedSettingsStats:d,saveModifiedSettingsStats:S,deleteModifiedSettingsStats:a}=(0,o.useDispatch)(n);return{savedSettingsStats:e,modifiedSettingsStats:t,isResolvingSettingsStats:s,hasResolvedSettingsStats:i,saveModifiedSettingsStats:S,updateModifiedSettingsStats:d,deleteModifiedSettingsStats:a}}function A(){const{updateModifiedSettingsServices:e,saveModifiedSettingsServices:t}=(0,o.useDispatch)(n),{savedSettingsServices:s,modifiedSettingsServices:i,isResolvingSettingsServices:d,hasResolvedSettingsServices:S}=(0,o.useSelect)((s=>{const{getSavedSettingsServices:i,getModifiedSettingsServices:d,isResolving:S,hasFinishedResolution:o}=s(n);return{updateModifiedSettingsServices:e,saveModifiedSettingsServices:t,savedSettingsServices:i(),modifiedSettingsServices:d(),isResolvingSettingsServices:S("getSavedSettingsServices"),hasResolvedSettingsServices:o("getSavedSettingsServices")}}),[]);return{savedSettingsServices:s,modifiedSettingsServices:i,saveModifiedSettingsServices:t,updateModifiedSettingsServices:e,isResolvingSettingsServices:d,hasResolvedSettingsServices:S}}function R(e){const t=`${e}_enable`,s=`${e}_post_types`,{savedSettingsModules:i}=y();return(0,E.useMemo)((()=>i?1!==i?.[t]?[]:m.OPTIONS_POST_TYPES.filter((e=>i[s].includes(e.value))):[]),[i,t,s])}const D=e=>({type:"UPDATE_MODIFIED_MODULES",payload:e}),I=e=>({type:"UPDATE_MODIFIED_STATS",payload:e}),w=e=>({type:"UPDATE_MODIFIED_SERVICES",payload:e}),O=e=>({type:"SET_SAVED_SETTINGS_MODULES",payload:e}),P=e=>({type:"SET_SAVED_SETTINGS_STATS",payload:e}),N=e=>({type:"SET_SAVED_SETTINGS_SERVICES",payload:e}),U=e=>L(e,"modules"),b=e=>L(e,"stats"),F=e=>L(e,"services"),V=e=>C("stats"),L=(e,t)=>async({registry:s,dispatch:i})=>{if(!t)throw new Error("Route is required.");const d=await T({method:"POST",data:e,route:t});return d?.code?(s.dispatch(p.store).createSuccessNotice((0,f.sprintf)("%s: %s",d.code,d.message),{type:"snackbar"}),!1):(i[`setSavedSettings${t.charAt(0).toUpperCase()+t.slice(1)}`](e),s.dispatch(p.store).createSuccessNotice((0,f.__)("Settings saved.","ai-copilot"),{type:"snackbar"}),!0)},C=e=>async({registry:t,dispatch:s})=>{if(!e)throw new Error("Route is required.");const i=await T({route:e,method:"DELETE"});return i?.code?(t.dispatch(p.store).createSuccessNotice((0,f.sprintf)("%s: %s",i.code,i.message),{type:"snackbar"}),!1):(s[`setSavedSettings${e.charAt(0).toUpperCase()+e.slice(1)}`]({}),t.dispatch(p.store).createSuccessNotice((0,f.__)("Filters settings have been reset.","ai-copilot"),{type:"snackbar"}),!0)},G=async()=>{try{const e=await T({route:"stats"});return P(e)}catch(e){console.error(e)}},j=async()=>{try{const e=await T({route:"modules"});return O(e)}catch(e){console.error(e)}},k=async()=>{try{const e=await T({route:"services"});return N(e)}catch(e){console.error(e)}};function $(e=r,t){switch(t.type){case"UPDATE_MODIFIED_MODULES":return{...e,modifiedSettings:{...e.modifiedSettings,modules:{...e.modifiedSettings.modules,...t.payload}}};case"UPDATE_MODIFIED_STATS":return{...e,modifiedSettings:{...e.modifiedSettings,stats:{...e.modifiedSettings.stats,...t.payload}}};case"UPDATE_MODIFIED_SERVICES":return{...e,modifiedSettings:{...e.modifiedSettings,services:{...e.modifiedSettings.services,...t.payload}}};case"SET_SAVED_SETTINGS_MODULES":return{...e,savedSettings:{...e.savedSettings,modules:{...e.savedSettings.modules,...t.payload}},modifiedSettings:{...e.modifiedSettings,modules:{...e.modifiedSettings.modules,...t.payload}}};case"SET_SAVED_SETTINGS_STATS":return{...e,savedSettings:{...e.savedSettings,stats:{...e.savedSettings.stats,...t.payload}},modifiedSettings:{...e.modifiedSettings,stats:{...e.modifiedSettings.stats,...t.payload}}};case"SET_SAVED_SETTINGS_SERVICES":return{...e,savedSettings:{...e.savedSettings,services:{...e.savedSettings.services,...t.payload}},modifiedSettings:{...e.modifiedSettings,services:{...e.modifiedSettings.services,...t.payload}}};default:return e}}const Y=(0,o.createReduxStore)(n,{reducer:$,actions:i,selectors:s,resolvers:d});(0,o.register)(Y);const q=n;(window.aicp=window.aicp||{})["api-admin-menu"]=t})();